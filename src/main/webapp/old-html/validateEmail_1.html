<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>Validate Email</title>
    <link rel="shorcut icon" href="../styles/images/phagebookLogoMin_16x16.ico"/>
    <base href="/">
    <link rel="stylesheet" href="../styles/cssBootstrap/bootstrap.css"/>
    <link rel="stylesheet" href="../styles/clothoNavBar.css">
    <link rel="stylesheet" href="../styles/phagebookMainStyle.css"/>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
    <script src="../scripts/angular.js"></script>
    <script src="../scripts/jquery.js"></script>
    <script src="../scripts/lodash.js"></script>
    <script src="../scripts/cookieHandler.js"></script>
    <script src="https://code.jquery.com/jquery-1.10.1.min.js"></script>


    <script src= "https://ajax.googleapis.com/ajax/libs/angularjs/1.2.26/angular.min.js"></script>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/3.1.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/q.js/1.0.0/q.js"></script>

<body>
<div ng-module="clothoRoot">
    <div class="container">
        <div clotho-command-bar></div>
    </div>
    <terminal-aside></terminal-aside>
</div>

   <div class="intro-header">
        <div class="container">

            <div class="row">
                <div class="col-lg-12">
                    <div class="intro-message">
                        <h1>Please check your email to verify your Phagebook account.</h1>
                        <h3>Click the button below to resend the verification email.</h3>
                        
                        <ul class="list-inline">
                            <li>
                                <button id="resendButton" class="btn btn-default btn-lg"><i class="glyphicon glyphicon-backward"></i> Resend Verification</button>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <div class="modal-footer">
        Created by <a href="http://www.cidarlab.org" target="_blank">CIDAR at Boston University</a><br>
        Built by <a href="mailto:phagebookdevelopment@googlegroups.com">The Phagebook Team</a><br> 
        <img src="../styles/images/logo-trace_black.png" style="height:50px">
        <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png" /></a>
        <img src="../images/logos/cidar-backgbround-no-js.png" style="height:50px">
        <br />This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>.
    </div>

<!---SCRIPTS-->

<script src="../scripts/clotho/b18fc8c8.clotho-app-command.js"></script>
<script src="../scripts/clotho/c0f113c2.clotho-core-module.js"></script>
<!--note - remove all scripts below this for api-only build-->
<script type='text/javascript' src="../scripts/clotho/b18fc8c8.clotho-app-command.js"></script>
<script type='text/javascript' src="../scripts/clotho/c0f113c2.clotho-core-module.js"></script>
<script type='text/javascript' src="../scripts/clotho/c2a11f43.clotho-foundation-module.js"></script>
<script src="../scripts/clotho/clotho3API.js"></script>
<script src='../scripts/clotho/68a2b2df.clotho-command-module.js'></script>
<script src="../scripts/angular.ng-modules.js"></script>
<script>
    $("#resendButton").click(function ()
        { console.log(sessionStorage.getItem("username"));
            
        var user = getParameterByName('id');  //NOT NEEDED
        //Johan needs to help with the code hash send thing??
        $.ajax({
                    url: "resendVerification",
                    type: "GET",
                    async: false,
                    data: {
                        //need to get emailId from sessionStorage
                        //"emailId": code to get it from session Storage
                        "id" : getCookie("loggedInUserId")
                    },
                    success: function (response) {
                        alert(response["message"]);
                        //reload the page? HTML pop-up? 
                    },
                    error: function () {
                        alert("some sort of error occurred");
                    }
                });
                
        });
    
        function getParameterByName(name) {
            name = name.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
            var regex = new RegExp("[\\?&]" + name + "=([^&#]*)"),
                results = regex.exec(location.search);
            return results === null ? "" : decodeURIComponent(results[1].replace(/\+/g, " "));
        }
</script>

</body>
</html>


