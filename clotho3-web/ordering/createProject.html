<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Clotho API Examples</title>
    <meta name="description" content="Clotho Lab Ordering">
    <meta name="viewport" content="width=1024, initial-scale=1">
    <script src ="scripts/newProject/clotho3API.js"></script>

    <script src="https://netdna.bootstrapcdn.com/bootstrap/3.1.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/q.js/1.0.0/q.js"></script>
    <script src="https://code.jquery.com/jquery-1.10.1.min.js"></script>

    <!-- not necessary until serving outside root directory / want html5 mode -->
    <base href="/">


    <link rel="stylesheet" href="styles/2e84f2a0.command.css"/> 
    <link rel="stylesheet" href="styles/773cbfe6.main.css"/> 
    <link rel ="stylesheet" href="styles/Phagebook_Styles.css"/>


    <script src="bower_components/jquery/jquery.js"></script>

    <!-- note that angular is required for any clotho functionality -->
    <script src="bower_components/angular/angular.js"></script>
    <!-- note that lodash is required by several components -->
    <script src="bower_components/lodash/dist/lodash.js"></script>


</head>

<body>
<div ng-app="clothoRoot">
    <div class="container">
        <div clotho-command-bar></div>
    </div>
    <terminal-aside></terminal-aside>
</div>

<div class = "contentBackground"> 
    <div class = "mainContent"> 
        <div class = "leftColumn">
            <img src = "/images/people/Katie_Lewis.jpeg">
            <h4> Katie Lewis Projects </h4>
            <table id="projTable">
                <tr>
                    <td id="iGEM"><a href="./Projects.html" style="display:block;">iGEM</a> </td>
                </tr>
                <tr>
                    <td id="Phagebook"><a href = "./Projects.html" style = "display:block;">Phagebook</a></td>
                </tr>
            </table>
            <!--<ul class = "projectsTabs" id = "projTabs">-->
                <!--<li><a href = "#iGEM">iGEM</a></li>-->
                <!--<li><a href = "#Phagebook">Phagebook</a></li>-->
                <!--<li><a href = "#App">Android App</a></li>-->
            <!--</ul>-->

            <br><br>

        </div>


            <div class="createProject">
                <ng-form class="form-horizontal" name="projectForm" ng-class="{'has-error' : projectForm.name.$dirty && projectForm.name.$invalid}">

                    <h1 class = "pageHeading"> Create New Project </h1><br><br> 
                    <label>Project Name: </label> <br> 
                    <input id="projName" type="text"><br><br> 
                    <label>Lab(s):</label><br>
                    <input id="projLabs" type="text"><br><br>
                    <label> PI:</label><br> 
                    <input id="pi" type="text"><br><br> 
                    <label>Project Lead:</label><br>
                    <input id="projLead" type="text"><br><br>
                    <label>Project Advisor:</label><br>
                    <input id="advisor" type="text"><br><br>
                    <!--<label>Project Members:</label>-->
                    <!--<input id="projMembers" type="text"><br><br>-->
                    <label>Project Description:</label> 
                    <textarea id="description" rows="7" cols="70"> </textarea><br><br> 
                    <button id = "create" class="btn btn-primary" >Create</button><br>


                </ng-form>
            </div>
    </div>
</div>



<!--------
SCRIPTS
--------->
<!--note - correct app based on the distribution, comments removed by build-->


<script src="scripts/b18fc8c8.clotho-app-command.js"></script>

<script src="scripts/c0f113c2.clotho-core-module.js"></script>

<!--note - remove all scripts below this for api-only build-->

<script src="scripts/c2a11f43.clotho-foundation-module.js"></script>


<script src="scripts/68a2b2df.clotho-command-module.js"></script>

<script>

    $(document).ready(function() {

        $("#create").click(function () {
            var str = '{';
            //alert("hello world!");
            //alert(document.getElementById("projName").value);
            var id = '"' + "clotho.developer." + document.getElementById("projName").value.toLowerCase() + '"';
            var firstObj = str.concat('"id":',id, ',"schema":', '"org.clothocad.model.Projects"', ',"name":', '"', document.getElementById("projName").value, '"',',"projectLead":', '"', document.getElementById("projLead").value, '"');
            var obj = firstObj.concat(',"Lab":','"',document.getElementById("projLabs").value, '"', ',"PI":', '"', document.getElementById("pi").value, '"', ',"Description":', '"', document.getElementById("description").value,'"',',"advisor":','"',document.getElementById("advisor").value,'"', '}');
            alert(obj);
            var jsonObj = JSON.parse(obj);
            Clotho.create(jsonObj).then(function(){
                var tableRef = document.getElementById("projTable");
                var newRow = tableRef.insertRow(tableRef.rows.length);
                var newCell = newRow.insertCell(0);
                newCell.innerHTML = '<a href="./Projects.html" style = "display:block">' + document.getElementById("projName").value + '</a>';


//                newCell.innerHTML=  '<a href="'+whatever+'">'+fname[j]+'</a>'
//                var node = document.createElement("LI");
//                var textnode = document.createTextNode(document.getElementById("projName").value);
//                node.appendChild(textnode);
//                document.getElementById("projTabs").appendChild(node);
            });
        });
    });

    // Clotho.create(obj).then(function(id) {
    //     Clotho.get(id).then(function(data) {
    //         alert(data.sequence);
    //     }).done();
    // });

    //    angular.module('newProject', ['clotho.foundation']).controller('createProjectCtrl', function($scope, Clotho){
//        $scope.createProject = function(){
//            console.log("hello");
//            var obj = '{';
//            obj.concat('""id"":', 'clotho.delevloper.', $scope.projname.toLowerCase(), '"",schema"":', '""org.clothocad.model.Projects""', ',""name"":',$scope.projname, ',""PI"":', $scope.pi, ',""Description"":', $scope.description, '}');
//            JSON.parse(obj);
//            Clotho.create(obj);
//        }
//    });
</script>



</body>
</html>