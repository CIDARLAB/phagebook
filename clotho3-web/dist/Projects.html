<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Projects</title>
    <meta name="description" content="Clotho Projects">
    <meta name="viewport" content="width=1024, initial-scale=1">

      <script src="scripts/clotho3API.js"></script>
      <script src ="clotho3API/papaparse.min.js"></script>

    <!-- not necessary until serving outside root directory / want html5 mode -->
    <base href="/">

    <link rel="stylesheet" href="styles/2e84f2a0.command.css"/>
    <link rel="stylesheet" href="styles/773cbfe6.main.css"/>
    <link rel ="stylesheet" href="styles/Phagebook_Styles.css"/>

    <script src="https://netdna.bootstrapcdn.com/bootstrap/3.1.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/q.js/1.0.0/q.js"></script>
    <script src="https://code.jquery.com/jquery-1.10.1.min.js"></script>

    <script src="bower_components/jquery/jquery.js"></script>

    <!-- note that angular is required for any clotho functionality -->
    <script src="bower_components/angular/angular.js"></script>
    <!-- note that lodash is required by several components -->
    <script src="bower_components/lodash/dist/lodash.js"></script>
      <script src="projectsCTRL.js"></script>
    <script src="projects-app.js"></script>

</head>
<body ng-controller = "projectsCTRL" onload = "displayProjects()">
<!--[if lt IE 9]>
<script src="bower_components/es5-shim/es5-shim.js"></script>
<script src="bower_components/json3/lib/json3.min.js"></script>
<![endif]-->

<div ng-app="clothoRoot">
  <div class="container">
    <div clotho-command-bar></div>
  </div>

  <terminal-aside></terminal-aside>


<div class = "contentBackground" ng-app = "projects">
    <div class = "mainContent">
        <div class = "leftColumn">
            <div id = "profilePic" class = "profileImg"
                 style="background-image:url('/images/people/kara_pro.PNG')">
            </div>
            <!--<input type="file" id="imageupload" onchange="previewFile()"><br>
            <img src="" id="imagesource" alt="Image preview..." style = "width: 150px">
            <img src = "/images/people/kara_pro.PNG">-->
            <a href = "Profile.html" id = "profileName"> </a><br>
            <a  href = "" id = "universityName"></a><br>
            <a  href = "" id = "positionName"></a><br><br>


            <a href="Profile.html" >News</a><br>
            <a href="Ordering.html" >Ordering</a><br>
            <a href="./Profile_papers.html">Papers</a><br>
            <a href="Projects.html" >Projects</a><br>
            <a href="" > Parts</a> <br><br>

            <a href ="" style="align-self: center" >Colleagues </a><br>
            <div class = inline-block>

                <table id="friendBox" class="form-inline " style='margin-bottom: 10px;' role="form">
                    <tbody style="text-align: center;">
                </table>

            </div>
            <div class = "row">
                <div class = "friendImg"
                     style="background-image:url('/images/people/Katie_Lewis.jpeg');">
                    <div class = "friendName">Katie </div>
                </div>
                <div class = "friendImg"
                     style="background-image:url('/images/people/Zach.JPG');">
                    <div class = "friendName">Zach </div>
                </div>
                <div class = "friendImg"
                     style="background-image:url('/images/people/prash.jpg');">
                    <div class = "friendName">Prashant</div>
                </div>
                <div class = "friendImg"
                     style="background-image:url('/images/people/DougDensmore.png');">
                    <div class = "friendName">Doug </div>
                </div>
                <div class = "friendImg"
                     style="background-image:url('/images/people/Inna.jpg');">
                    <div class = "friendName">Inna </div>
                </div>
            </div>
            </div>



            <!--<div id = "rightColumn" ondrop="drop(event)" ondragover="allowDrop(event)">-->
        <div class = "rightColumn" ondrop="drop(event)" ondragover="allowDrop(event)">
        <!--<button>  <img src = "/images/Editing-Edit-icon.png" onclick = "editProject()" id="editIcon"></button>-->
            <h1 class = "pageHeading" id = "projTitle"> </h1>
          <div class = "information">
            <ul class = "labInfo"> 
              <li> Associated Labs: </li>
              <li> Primary Investigator: </li>
              <li> Project Lead: </li>
              <li> Project Advisor: </li>
              <li> Description: </li>
            </ul>
            <ul class = "labInfo2">
              <li id="currentLab"> </li>
              <li id="currentPI"> </li>
              <li id="currentLead"> </li>
              <li id="currentAdvisor"> </li>
              <li id="projectDescription"></li>
            </ul>
              <!--<p id = "projectDescription" ></p>-->
              <p id = "partsLink"> <a href="Parts.html">Genetic Parts Inventory</a></p>
            </div>
            <button type="button" id="button" class="btn btnphagebook btn-lg">Create New Project </button>
            <!--<img height="100" width="100" id = "image2"  ondragstart="drag(event)" draggable="true" src="/images/socialmedia/twitter.png">-->
            <!--<p>  Currently, synthetic biology lacks a systematic design-build-test workflow for creating genetic circuits. Researchers often waste time and resources on traditional trial-and-error approaches in designing and assembling large devices. My research works towards overcoming this roadblock by creating a standardized experimental-computational workflow that is clearly defined and applicable to a wide variety of researchers and projects. This workflow integrates software tools to reduce human error and to structure the way designs are chosen, assembled, and tested.-->
            <!--</p>-->
            <br><br>
            <div id="entryButtons">

                <button class="btn btnphagebook btn-lg" onclick = "newEntry()" id = "newEntry">New Entry</button><br><br>

                <button class = "btn btnphagebook btn-lg" id="entryEdit">Edit Entry</button>

                <button class="btn btnphagebook btn-lg" onclick = "changeEntry()" id="doneEditingEntry">Done</button>
                <p id="entryToChange"></p>
            </div>
            <h1 class = "labnotebook" id="notebookTitle">Notebook</h1>
            <div>
                <button class="btn btnphagebook btn-lg" id="searchButton" onclick="searchEntries()">search</button>

                <ng-form class="form-horizontal" id="searchNotebook" ng-class="{'has-error' : projectForm.name.$dirty && projectForm.name.$invalid}">
                    <input id="searchDate" type="date">
                    <input id="keywordInsert" type="text" placeholder="keyword"><br><br>
                    <br><br>
                </ng-form>
                <p id="keywordSearch" onclick="searchByKeyword()">Keyword</p>
                <p id="dateSearch" onclick="searchByDate()">Date</p>
            </div>
            <!--<button onclick="upload('labels.csv')">Upload CSV File</button>-->
        <div class = "notebook" id="noteID" ondrop="drop(event)" ondragover="allowDrop(event)" onload="photoAppear()">
            <h3 id="heading" align="center"></h3>
            <p id="entryGoesHere" contenteditable="false" onload="disp()"></p>

        </div>
            <br>
            <button class="btn btnphagebook btn-lg" id="next" onclick ="nextEntry()">Next</button>
            <button class="btn btnphagebook btn-lg" id="previous" onclick="prevEntry()">Previous</button>
            <button id = "create" class="btn btnphagebook btn-lg" >Create</button><br>
            <button id="entryButton" onclick = "createEntry()">Create New Project</button>

        </div>





<div id="createProject">
    <ng-form class="form-horizontal" name="projectForm" ng-class="{'has-error' : projectForm.name.$dirty && projectForm.name.$invalid}">

        <h1 class = "pageHeading"> Create New Project </h1><br><br> 
        <label>Project Name: </label> <br> 
        <input id="projName" type="text"><br><br> 
        <label>Lab(s):</label> <br>
        <input id="projLabs" type="text"><br><br>
        <label> PI:</label> <br> 
        <input id="pi" type="text"><br><br> 
        <label>Project Lead:</label> <br>
        <input id="projLead" type="text"><br><br>
        <label>Project Advisor:</label> <br>
        <input id="advisor" type="text"><br><br>
        <!--<label>Parts Used</label>-->
        <!--<label>Project Members:</label>-->
        <!--<input id="projMembers" type="text"><br><br>-->
        <label>Project Description:</label> <br><br>
        <textarea id="description" rows="7" cols="50"> </textarea><br><br> 



    </ng-form>
</div>
    <div id="notebookEntry">
        <form class="form-horizontal" id="notebookEn" ng-class="{'has-error' : projectForm.name.$dirty && projectForm.name.$invalid}">
            <h1 class = "pageHeading"> New Lab Notebook Entry </h1><br><br> 
            <label>Date (d/m/y): </label><br>
            <input id="entryDate" type="date"><br><br>
            <label>Heading: </label><br>
            <input id="entryHeadin" type="text"><br><br>
            <label>Images: </label>
            <input type="file" id ="file1" name="filename" onchange="readImage(this)" accept="image/gif, image/jpeg, image/png"><br>
            <!--<img id="uploadPreview" style="width: 100px; height: 100px;" />-->

        </form>
        <p id="entryText">Notebook Entry:</p>
        <textarea rows="4"; cols="50"; id="textEntry"></textarea><br>
        <!--<form action="scripts/newProject/uploadFile.php" method="post" id="uploader" enctype="multipart/form-data">-->
            <!--Select image to upload:-->
            <!--<input type="file" name="fileToUpload" id="fileToUpload">-->
            <!--<input type="submit" value="Upload Image" name="submit">-->
        <!--</form>-->


    </div>
        <!--<img height="100" width="100" id = "image1"  ondragstart="drag(event)" draggable="true" src="/images/socialmedia/twitter.png">-->

    </div>
</div>

</div>


  <!--------
SCRIPTS
--------->

<!--note - correct app based on the distribution, comments removed by build-->

<!--<script type="text/javascript">-->
  <!--document.getElementById("Create").onclick = function(){-->
    <!--location.href = "./createProject.html";-->
  <!--}-->
<!--</script>-->
    <script src="scripts/b18fc8c8.clotho-app-command.js"></script>

    <script src="scripts/c0f113c2.clotho-core-module.js"></script>

    <!--<script src ="scripts/notebook_projects.js"></script>-->

    <!--note - remove all scripts below this for api-only build-->

    <script src="scripts/c2a11f43.clotho-foundation-module.js"></script>


    <script src="scripts/68a2b2df.clotho-command-module.js"></script>

<script>
    function editEntry(){
        //personID = "clotho.developer.katielewis";
        personID= window.name;
        var count = 0;
        var current = document.getElementById("entryGoesHere").innerText;

//        alert(document.getElementById("entryGoesHere").contentEditable);
        Clotho.get(personID).then(function(result) {
            if(result.notebookEntries.length > 0){
                document.getElementById("entryGoesHere").contentEditable = "true";
                document.getElementById("doneEditingEntry").style.visibility= "visible";
                for (var i = 0; i < result.notebookEntries.length; i++) {
                    Clotho.get(result.notebookEntries[i]).then(function (res) {
                        if (current.trim() == res.entryText.trim()) {
                            document.getElementById("entryToChange").innerHTML = count;
//                            alert(document.getElementById("entryToChange").innerHTML);
                        };
                        count++;
                    });
                }
                ;
            }

        });
    }
</script>
<script>
    function changeEntry() {

        //personID = "clotho.developer.katielewis";
        personID = window.name
        var count = document.getElementById("entryToChange").innerHTML;
//        alert("hello");
//        alert(count);
        Clotho.get(personID).then(function(res){
           Clotho.get(res.notebookEntries[count]).then(function(result){
//               alert("hi");
                result.entryText = document.getElementById("entryGoesHere").innerText;
               Clotho.set(result);
               document.getElementById("entryGoesHere").contentEditable = "false";
               document.getElementById("doneEditingEntry").style.visibility = "hidden";
           });
        });
    };
</script>

<script>
    function searchByDate(){
        document.getElementById("searchDate").style.display = "block";
        document.getElementById("keywordInsert").style.display = "none";
        document.getElementById("keywordSearch").style.display = "block";
        document.getElementById("dateSearch").style.display = "none";
    }
</script>



<script>
    function searchByKeyword(){
        document.getElementById("searchDate").style.display = "none";
        document.getElementById("keywordInsert").style.display = "block";
        document.getElementById("keywordSearch").style.display = "none";
        document.getElementById("dateSearch").style.display = "block";
//    <input id="searchDate" type="date"><br><br>
//        <input id="keywordInsert" type="text"><br><br>
    }
</script>

<script>
    //Displays the next project notebook entry
    function nextEntry(){
        //personID = "clotho.developer.katielewis";
        personID=  window.name;
        var count = 0;
        var current = document.getElementById("entryGoesHere").innerText;
        Clotho.get(personID).then(function(result){
                for(var i=0;i < result.notebookEntries.length;i++){
//                    alert(result.notebookEntries.length);
                    Clotho.get(result.notebookEntries[i]).then(function(res){
                        if(current.trim() == res.entryText.trim() && res.id != result.notebookEntries[result.notebookEntries.length-1]){
                            Clotho.get(result.notebookEntries[1+count]).then(function(re){
                                if(res.entryHeading != ""){
                                    document.getElementById("heading").innerText = re.entryHeading;
                                }
                                document.getElementById("entryGoesHere").innerText = re.entryText;

                            });
                        }
                        count++;
                    });
                };
        });
    };
</script>


<script>
    //Displays the previous notebook entry
    function prevEntry(){
        //personID = "clotho.developer.katielewis";
        personID = window.name;
        var count = 0;
        var current = document.getElementById("entryGoesHere").innerText;
        Clotho.get(personID).then(function(result){
            for(var i=0;i < result.notebookEntries.length;i++){
                Clotho.get(result.notebookEntries[i]).then(function(res){
                    if(current == res.entryText && res.id != result.notebookEntries[0]){
                        Clotho.get(result.notebookEntries[count-1]).then(function(re){
                            if(res.entryHeading != ""){
                                document.getElementById("heading").innerText = re.entryHeading;
                            }
                            document.getElementById("entryGoesHere").innerText = re.entryText;
                        });
                    }
                    count++;
                });
            };
        });

    };
</script>
<script>
    function autocomp(){
        alert("hi");
        Clotho.autocomplete(document.getElementById("pi").value).then(function(res){

        });
    }
</script>

<script>
    function searchEntries(){
       // personID = "clotho.developer.katielewis";
        personID = window.name;
        var date = document.getElementById("searchDate");
        var keyword = document.getElementById("keywordInsert");
        var entryHere = document.getElementById("entryGoesHere");
        if (date.style.display != "none"){
            var current1 = date.value;
            Clotho.get(personID).then(function(result){
                for(var i=0;i < result.notebookEntries.length;i++){
                    Clotho.get(result.notebookEntries[i]).then(function(res) {
                        if(current1 == res.entryData){
                            entryHere.style.display = "none";
                            document.getElementById("heading").style.display = "none";
                            document.getElementById("noteID").style.borderStyle='none';
                            document.getElementById("noteID").display = "none";
                            var div = document.createElement('p');
                            document.getElementById("noteID").appendChild(div);
                            div.style.position = 'relative';
                            div.style.height = '100px';
                            div.className = "justCreated";
                            div.style.borderStyle = 'solid';
                            div.innerHTML= res.entryHeading;
                            div.style.textAlign ='center';
                            div.paddingTop = '5px';
                            div.onclick = function() {chooseEntry(res.entryText, res.entryHeading);};
                            // entryHere.innerHTML = res.entryText;
                            // if(res.entryHeading != ""){
                            //     document.getElementById("heading").innerText = res.entryHeading;
                            // }
                        };
                    });
                };
            });
        }
//        if (date.style.display != "none"){
//            var current1 = document.getElementById("searchDate").value;
//            Clotho.get(personID).then(function(result){
//                for(var i=0;i < result.notebookEntries.length;i++){
//                    Clotho.get(result.notebookEntries[i]).then(function(res) {
//                        if(current1 == res.entryData){
//                            alert(i);
//                            document.getElementById("entryGoesHere").innerHTML = res.entryText;
//                            if(res.entryHeading != ""){
//                                document.getElementById("heading").innerText = res.entryHeading;
//                            }
//                        };
//                    });
//                };
//            });
//        }

        else if(keyword.style.display != "none"){
            var current = document.getElementById("keywordInsert").value;
            Clotho.get(personID).then(function(result){
                for(var i=0;i < result.notebookEntries.length;i++){
                    Clotho.get(result.notebookEntries[i]).then(function(res) {
                        if(res.entryText.search(current) != -1){
                            entryHere.style.display = "none";
                            document.getElementById("heading").style.display = "none";
                            document.getElementById("noteID").style.borderStyle='none';
                            document.getElementById("noteID").display = "none";
                            var div = document.createElement('p');
                            document.getElementById("noteID").appendChild(div);
                            div.style.position = 'relative';
                            div.style.height = '100px';
                            div.className = "justCreated";
                            div.style.borderStyle = 'solid';
                            div.innerHTML= res.entryHeading;
                            div.style.textAlign ='center';
                            div.paddingTop = '5px';
                            div.onclick = function() {chooseEntry(res.entryText, res.entryHeading);};
                            // entryHere.innerHTML = res.entryText;
                            // if(res.entryHeading != ""){
                            //     document.getElementById("heading").innerText = res.entryHeading;
                            // }
                        };
                    });
                };
//                for(var i=0;i < result.notebookEntries.length;i++){
//                    Clotho.get(result.notebookEntries[i]).then(function(res) {
//                        if(res.entryText.search(current) != -1){
//                            document.getElementById("entryGoesHere").innerHTML = res.entryText;
//                            if(res.entryHeading != ""){
//                                document.getElementById("heading").innerText = res.entryHeading;
//                            }
//                        }
//                    });
//                };
            });
        }


    }
</script>

<script>
    function chooseEntry(text, heading){
        $('.justCreated').remove();
        document.getElementById("heading").style.display = "block";
        document.getElementById("noteID").style.borderStyle='solid';
        document.getElementById("noteID").display = "block";
        document.getElementById("heading").innerHTML = heading;
        document.getElementById("entryGoesHere").innerHTML = text;
        document.getElementById("entryGoesHere").style.display = 'block';
    }
</script>

<script type = "text/javascript">

        $("#CreateButton").click(function(){
            var id = document.getElementById("rightColumn");
            var secondID = document.getElementById("createProject");
            var thirdID = document.getElementById("notebookEntry");
            thirdID.style.display = 'none';
            id.style.display='none';
            secondID.style.display = 'block';
        });

</script>

<script>
    function disp(){
        var personID = window.name;
        alert(window.name)
        //personID = "clotho.developer.katielewis";
        Clotho.get(personID).then(function(personObj){
                if(personObj.notebookEntries.length==0){
                    document.getElementById("entryGoesHere").innerText = "Create a Notebook Entry!";
                }
                else{
                    Clotho.get(personObj.notebookEntries[0]).then(function(result){
                        document.getElementById("entryGoesHere").innerText = result.entryText;
                    });
                }
        });
    };
</script>
<script>
    function getBase64Image(img) {
        // Create an empty canvas element
        var canvas = document.createElement("canvas");
        canvas.width = img.width;
        canvas.height = img.height;

        // Copy the image contents to the canvas
        var ctx = canvas.getContext("2d");
        ctx.drawImage(img, 0, 0);

        // Get the data-URL formatted image
        // Firefox supports PNG and JPEG. You could check img.src to guess the
        // original format, but be aware the using "image/jpg" will re-encode the image.
        var dataURL = canvas.toDataURL("image/png");
//        alert(dataURL.replace(/^data:image\/(png|jpg);base64,/, ""));
        var dat= dataURL.replace(/^data:image\/(png|jpg);base64,/, "");
        Clotho.get("clotho.developer.notebook").then(function(notebookObj){
                    notebookObj.pictures[0] = dat;
                Clotho.set(notebookObj);
//                alert("Hi! 3");
            });
    }
</script>

<!--<script>-->
    <!--function photoAppear(){-->
        <!--var personID = "clotho.developer.katielewis1";-->
        <!--Clotho.get(personID).then(function(personObj){-->

            <!--Clotho.get(personObj.notebookEntries[0]).then(function(res){-->
                <!--if(res.entryHeading != ""){-->
                    <!--document.getElementById("heading").innerText = res.entryHeading;-->
                <!--}-->
                <!--document.getElementById("entryGoesHere").innerText = res.entryText;-->
            <!--});-->
<!--//            var image = new Image();-->
<!--//                image.src = "data:image/png;base64," + result.pictures[0];-->
<!--//                document.body.appendChild(image);-->
            <!--});-->
            <!--// alert(result.notebookEntries[0]);-->

    <!--}-->
<!--</script>-->

    <script>
        //How should I get the project ID for the project that the entry is in
        function createEntry(){
//            alert(document.getElementById("file").files.length);
            var personID = window.name;
//            var len = document.getElementById("file").files.length;
            //var str = '{';
//            var obj = str.concat('"schema":', '"org.clothocad.model.Notebook"',',"entryDate":','"',document.getElementById("entryDate").value, '"', ',"entryText":', '"', document.getElementById("textEntry").value, '"', ',"entryPics":[', '"', document.getElementById("entryPic").value,'",', '"', document.getElementById("entryPic1").value, '",', '"', document.getElementById("entryPic2").value, '"]', '}');
            var obj = {"schema":"org.clothocad.model.Notebook","entryData":document.getElementById("entryDate").value,"entryText":document.getElementById("textEntry").value, "entryPics":[], "entryHeading":document.getElementById("entryHeadin").value};
//            var jsonObj = JSON.parse(obj);
            Clotho.get(personID).then(function (personObj) {
                Clotho.create(obj).then(function (result) {
//                    alert(getBase64Image(document.getElementById("file1")));
                    personObj.notebookEntries[personObj.notebookEntries.length] = result;
                    Clotho.set(personObj);

            });
            });

            document.getElementById("textEntry").innerText="";
            document.getElementById("notebookEn").reset();
            var id = document.getElementById("rightColumn");
            var secondID = document.getElementById("createProject");
            var thirdID = document.getElementById("notebookEntry");
            id.style.display = 'block';
            secondID.style.display = 'none';
            thirdID.style.display = 'none';
        };
    </script>
<script>
    function readImage(input){
//    document.getElementById('file1').onchange = function (evt) {
//        var tgt = evt.target || window.event.srcElement,
//                files = tgt.files;

        // FileReader support
        if (input.files && input.files[0]) {
//            var image = new Image();
//            var file = document.getElementById("file1").files;
//            alert(file);
//            image.src = file[0].readAsDataURL();
            var fr = new FileReader();
            fr.onload = function (e) {
                var imageData= e.target.result;
//                alert("made it this far..");
                Clotho.get("clotho.developer.notebook").then(function(res){
                    res.pictures[0] = imageData;
                    Clotho.set(result);
                });
//                alert(fr.result);
//                alert(imageData);
//                image.src = fr.result;
            };
            fr.readAsDataURL(input.files[0]);
//            fr.readAsDataURL(files[0]);
//            alert(image.src);
//            getBase64Image(image);

        }

    };
</script>

<!--<script>-->
    <!--function upload(fileName){-->
        <!--var obj = {"header":"true"};-->
        <!--Clotho.uploadCSV(fileName, obj).then(function(res){-->
            <!--alert(res);-->
        <!--});-->
    <!--};-->
<!--</script>-->

    <script>
        function newEntry(){
            var id = document.getElementById("rightColumn");
            var secondID = document.getElementById("notebookEntry");
            var thirdID = document.getElementById("createProject");
            thirdID.style.display = 'none';
            id.style.display = 'none';
            secondID.style.display = 'block';
        };
    </script>

    <script>
        function notebooks(){
//            alert("hello");
          var name = "clotho.developer.katielewis";
            Clotho.get(name).then(function(personObj){
                Clotho.get(personObj.notebookEntries[personObj.notebookEntries.length -1]).then(function(obj){
//                    alert(obj.entryPics[0]);
                    document.getElementById("image0").src = obj.entryPics[0];
                    document.getElementById("image1").src = obj.entryPics[1];

                });
            });
        };
    </script>

<script>
   function displayProjects() {
       var personID = "clotho.developer.katielewis";
       var loggedIn = "clotho.developer.katielewis";
       Clotho.get(personID).then(function (personObj) {
           var tableRef = document.getElementById("projTable");
           if (personObj.projects.length > 0) {
               var newRow = tableRef.insertRow(0);
               var newCell = newRow.insertCell(0);
               Clotho.get(personObj.projects[0]).then(function (proj) {
                   newCell.innerHTML = '<a href="./Projects.html" style = "display:block"+ value =' + proj.id + ' onclick = "projectDetails.call(this)">' + proj.name + '</a>';
               });
               for (var i = 1; i < personObj.projects.length; i++) {
                   Clotho.get(personObj.projects[i]).then(function (projectObj) {
                       newRow = tableRef.insertRow(tableRef.rows.length);
                       newCell = newRow.insertCell(0);
                       newCell.innerHTML = '<a href="./Projects.html" style = "display:block" value =' + projectObj.id + ' onclick = "projectDetails.call(this)">' + projectObj.name + '</a>';
                   });

               }
//                if(personObj.notebookEntries.length > 0){
//                    for(var i = 0; i < personObj.notebookEntries.length;i++){
//                        document.getElementById("notebookText").innerHTML += personObj.notebookEntries[i];
//                    }
//                }
               if(personObj.notebookEntries.length > 0){
                   Clotho.get(personObj.notebookEntries[0]).then(function(res){
                       if(res.entryHeading != ""){
                           document.getElementById("heading").innerText = res.entryHeading;
                       }
                       document.getElementById("entryGoesHere").innerText = res.entryText;
                   });
               }

               Clotho.get(personObj.projects[0]).then(function (projObj) {
                   document.getElementById("projTitle").innerHTML = projObj.name.toUpperCase();
                   document.getElementById("currentLab").innerHTML = projObj.Lab;
                   document.getElementById("currentLead").innerHTML = projObj.projectLead;
                   document.getElementById("currentPI").innerHTML = projObj.PI;
                   document.getElementById("currentAdvisor").innerHTML = projObj.advisor;
                   document.getElementById("projectDescription").innerHTML = projObj.Description;
               });
           }
           else if(personObj.projects.length == 0){
               var id = document.getElementById("rightColumn");
               var secondID = document.getElementById("createProject");
               var thirdID = document.getElementById("notebookEntry");
               thirdID.style.display = 'none';
               id.style.display='none';
               secondID.style.display = 'block';
           }
        if (loggedIn != "clotho.developer.katielewis"){
            document.getElementById("newEntry").style.display = "none";
            document.getElementById("entryEdit").style.display = "none";
            document.getElementById("CreateButton").style.display = "none";
        }

       });
   };
</script>

    <script>
       function projectDetails(){
           var personID  = "clotho.developer.katielewis";
           var projName = this.innerText;
           var id = document.getElementById("rightColumn");
           var secondID = document.getElementById("createProject");
           var thirdID = document.getElementById("notebookEntry");
           id.style.display = 'block';
           secondID.style.display = 'none';
           thirdID.style.display = 'none';
           Clotho.get(personID).then(function(Obj){
               for (var i = 0; i< Obj.projects.length;i++)
               {
                   projId = Obj.projects[i];
                   Clotho.get(projId).then(function(projObj){
                       if (projObj.name.toLowerCase() == projName.toLowerCase()){
//                           alert(true);
                           document.getElementById("projTitle").innerHTML =projObj.name.toUpperCase();
                           document.getElementById("currentLab").innerHTML = projObj.Lab;
                           document.getElementById("currentLead").innerHTML = projObj.projectLead;
                           document.getElementById("currentPI").innerHTML = projObj.PI;
                           document.getElementById("currentAdvisor").innerHTML = projObj.advisor;
                           document.getElementById("projectDescription").innerHTML = projObj.Description;
                           if(personObj.notebookEntries.length > 0){
                               Clotho.get(personObj.notebookEntries[0]).then(function(res){
                                   if(res.entryHeading != ""){
                                       document.getElementById("heading").innerText = res.entryHeading;
                                   }
                                   document.getElementById("entryGoesHere").innerText = res.entryText;
                               });
                           }

                       };
                   });
               };


           });
       };
    </script>
<script>

    $("#file1").change(function(e) {

    for (var i = 0; i < e.originalEvent.srcElement.files.length; i++) {
//        alert( e.originalEvent.srcElement.files.length);

    var file = e.originalEvent.srcElement.files[i];
    var img = document.createElement("img");
    var reader = new FileReader();
    reader.onloadend = function() {
    img.src = reader.result;
    }
    reader.readAsDataURL(file);
    $("input").after(img);
    $("input").after(img);
    }
    });


    getBase64Image(document.getElementById("file1"));

</script>


    <!--$(document).ready(function() {-->
    <script>
   // var personID = "clotho.developer.KLeFort";

        $("#create").click(function () {
            personID = window.name;
            alert("create new prof")
            var str = '{';
            var firstObj = str.concat('"schema":', '"org.clothocad.model.Projects"', ',"name":', '"', document.getElementById("projName").value, '"', ',"projectLead":', '"', document.getElementById("projLead").value, '"');
            var obj = firstObj.concat(',"Lab":', '"', document.getElementById("projLabs").value, '"', ',"PI":', '"', document.getElementById("pi").value, '"', ',"Description":', '"', document.getElementById("description").value, '"', ',"advisor":', '"', document.getElementById("advisor").value, '"', '}');
            var jsonObj = JSON.parse(obj);
            Clotho.create(jsonObj).then(function (result) {
                Clotho.get(personID).then(function (personObj) {
                    personObj.projects[personObj.projects.length] = result;
                    Clotho.set(personObj).then(function () {
                        Clotho.get(personObj.projects[personObj.projects.length -1]).then(function(projectObj){
                            var tableRef = document.getElementById("projTable");
                            var newRow = tableRef.insertRow(tableRef.rows.length);
                            var newCell = newRow.insertCell(0);
                            newCell.innerHTML = '<a href="./Projects.html" style = "display:block"" onclick = "projectDetails.call(this)">' + projectObj.name + '</a>';
//                            alert(projectObj.id);
//                            alert(newCell.id);
                            var id = document.getElementById("rightColumn");
                            var secondID = document.getElementById("createProject");
                            id.style.display = 'block';
                            secondID.style.display = 'none';
                            document.getElementById("projTitle").innerHTML = projectObj.name.toUpperCase();
                            document.getElementById("currentLab").innerHTML = projectObj.Lab;
                            document.getElementById("currentLead").innerHTML = projectObj.projectLead;
                            document.getElementById("currentPI").innerHTML = projectObj.PI;
                            document.getElementById("currentAdvisor").innerHTML = projectObj.advisor;
                            document.getElementById("projectDescription").innerHTML = projectObj.Description;

                        });




                    });
                });

            });
        });

    </script>




<script>
    function allowDrop(ev) {
        ev.preventDefault();
    }

    function drag(ev) {
        ev.dataTransfer.setData("image", ev.target.id);
    }

    function drop(ev) {
        ev.preventDefault();
        var data = ev.dataTransfer.getData("image");
        ev.target.appendChild(document.getElementById(data));
    }
</script>

<script type  = text/javascript>
    var personID = window.name;
    var personObj = [];
    $(document).ready(function() {
      //  alert(window.name);

        Clotho.get(personID).then(function (personObj) {
                    //alert("here");
                    document.getElementById("profileName").innerHTML = personObj.firstname + " " + personObj.lastname;
                    document.getElementById("universityName").innerHTML = personObj.institution;
                    document.getElementById("positionName").innerHTML = personObj.position;
                }

        );


    });
</script>


<!-- our custom app files -->
<script src="scripts/LabOrdering-app.js"></script>
<script src="scripts/Ordering.js"></script>
<script src="scripts/Tracking.js"></script>
<script src="scripts/orderingCtrl.js"></script>


</body>
</html>
