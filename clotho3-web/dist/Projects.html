<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Projects</title>
    <meta name="description" content="Clotho Projects">
    <meta name="viewport" content="width=1024, initial-scale=1">
      <script src ="clotho3API/clotho3API.js"></script>

    <!-- not necessary until serving outside root directory / want html5 mode -->
    <base href="/">

    <link rel="stylesheet" href="styles/2e84f2a0.command.css"/>
    <link rel="stylesheet" href="styles/773cbfe6.main.css"/>
    <link rel ="stylesheet" href="styles/Phagebook_Styles.css"/>

    <script src="http://netdna.bootstrapcdn.com/bootstrap/3.1.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/q.js/1.0.0/q.js"></script>
    <script src="http://code.jquery.com/jquery-1.10.1.min.js"></script>

    <script src="bower_components/jquery/jquery.js"></script>

    <!-- note that angular is required for any clotho functionality -->
    <script src="bower_components/angular/angular.js"></script>
    <!-- note that lodash is required by several components -->
    <script src="bower_components/lodash/dist/lodash.js"></script>
      <script src="projectsCTRL.js"></script>
    <script src="projects-app.js"></script>

</head>
<body ng-controller = "projectsCTRL" onload = "displayProjects()">
<!--[if lt IE 9]>
<script src="bower_components/es5-shim/es5-shim.js"></script>
<script src="bower_components/json3/lib/json3.min.js"></script>
<![endif]-->

<div ng-app="clothoRoot">
  <div class="container">
    <div clotho-command-bar></div>
  </div>

  <terminal-aside></terminal-aside>


<div class = "contentBackground" ng-app = "projects">
    <div class = "mainContent">
        <div class = "leftColumn">
          <img src = "/images/people/Katie_Lewis.jpeg">
          <h4> <a href ="./Profile.html">Katie Lewis</a> Projects </h4>
            <table id="projTable">
                <!--<tr>-->
                    <!--<td id="iGEM"><a href="./Projects.html" value="igem.id" style="display:block;">iGEM</a> </td>-->
                <!--</tr>-->
                <!--<tr>-->
                    <!--<td id="Phagebook"><a href = "./Projects.html" style = "display:block;">Phagebook</a></td>-->
                <!--</tr>-->
            </table>

          <br><br>

          <button type="button" id="CreateButton">Create New Project </button>

        </div>

        <div id = "rightColumn">
          <h1 class = "pageHeading" id = "projTitle"> </h1>
          <div class = "information">
            <ul class = "labInfo"> 
              <li> Associated Labs: </li>
              <li> Primary Investigator: </li>
              <li> Project Lead: </li>
              <li> Project Advisor </li>
              <li> Lab Members: </li>
            </ul>

            <ul class = "labInfo2"> 
              <li id="currentLab">  </li>
              <li id="currentPI">  </li>
              <li id="currentLead">  </li>
              <li id="currentAdvisor"> </li>
              <!--<li> Alan Pacheco,-->
                   <!--Yash Agarwal,-->
                   <!--Kathleen Lewis-->
              <!--</li>-->
            </ul>
            </div>
            <div class = "description">
                <p id="currentDescription">

                </p>
            <!--<p>  Currently, synthetic biology lacks a systematic design-build-test workflow for creating genetic circuits. Researchers often waste time and resources on traditional trial-and-error approaches in designing and assembling large devices. My research works towards overcoming this roadblock by creating a standardized experimental-computational workflow that is clearly defined and applicable to a wide variety of researchers and projects. This workflow integrates software tools to reduce human error and to structure the way designs are chosen, assembled, and tested.-->
            <!--</p>-->
          </div>
          <div class = "notebook">
            <ul class = "labnotebook">  <li>Notebook </li> </ul>
            <form action ="" class = "dropDown">
              <select name = "notebook" onchange = "notebook_projects(this.value)">
                <option value = "Kathleen Lewis">Kathleen Lewis</option>
                <option value = "Yash Agarwal">Yash Agarwal </option>
                <option value = "Alan Pacheco">Alan Pacheco </option>
              </select>
            </form>
            <textarea class = "notebookText" id = "notebookID">
            </textarea>
          </div>
        </div>




<div id="createProject">
    <ng-form class="form-horizontal" name="projectForm" ng-class="{'has-error' : projectForm.name.$dirty && projectForm.name.$invalid}">

        <h1 class = "pageHeading"> Create New Project </h1><br><br> 
        <label>Project Name: </label> <br> 
        <input id="projName" type="text"><br><br> 
        <label>Lab(s):</label><br>
        <input id="projLabs" type="text"><br><br>
        <label> PI:</label><br> 
        <input id="pi" type="text"><br><br> 
        <label>Project Lead:</label><br>
        <input id="projLead" type="text"><br><br>
        <label>Project Advisor:</label><br>
        <input id="advisor" type="text"><br><br>
        <label>Parts Used</label>
        <!--<label>Project Members:</label>-->
        <!--<input id="projMembers" type="text"><br><br>-->
        <label>Project Description:</label> 
        <textarea id="description" rows="7" cols="70"> </textarea><br><br> 
        <button id = "create" class="btn btn-primary" >Create</button><br>


    </ng-form>
</div>

        <div id="newProjectNotif">
            <p>Your project has been created!</p>
        </div>
    </div>
    </div>

<!--
Figure out how to get value from clicked cell in table (need to assign id? If so, how?)
How to I include added tabs/cells from createProject.html into Project.html?
After I query, can I do data.fieldname and display the value of that object's param
-->






  <!--------
SCRIPTS
--------->

<!--note - correct app based on the distribution, comments removed by build-->

<!--<script type="text/javascript">-->
  <!--document.getElementById("Create").onclick = function(){-->
    <!--location.href = "./createProject.html";-->
  <!--}-->
<!--</script>-->
    <script src="scripts/b18fc8c8.clotho-app-command.js"></script>

    <script src="scripts/c0f113c2.clotho-core-module.js"></script>

    <!--<script src ="scripts/notebook_projects.js"></script>-->

    <!--note - remove all scripts below this for api-only build-->

    <script src="scripts/c2a11f43.clotho-foundation-module.js"></script>


    <script src="scripts/68a2b2df.clotho-command-module.js"></script>

<script type = "text/javascript">
    $(document).ready(function(){
        $("#CreateButton").click(function(){
            var id = document.getElementById("rightColumn");
            var secondID = document.getElementById("createProject");
            id.style.display='none';
            secondID.style.display = 'block';
        });
    });
</script>



<script>
   function displayProjects(){
       var personID  = "clotho.developer.katielewis1";
       Clotho.get(personID).then(function (personObj) {
           var tableRef = document.getElementById("projTable");
           if (personObj.projects.length > 0)
           {
               var newRow = tableRef.insertRow(0);
               var newCell = newRow.insertCell(0);
               newCell.innerHTML = '<a href="./Projects.html" style = "display:block"+ value =' + personObj.projects[0].id + ' onclick = "projectDetails.call(this)">' + personObj.projects[0].name + '</a>';
               for(var i = 1; i < personObj.projects.length; i++){
                   if (typeof(personObj.projects[i])=="string")
                   {}
                   else{
                       newRow = tableRef.insertRow(tableRef.rows.length);
                       newCell = newRow.insertCell(0);
                       newCell.innerHTML = '<a href="./Projects.html" style = "display:block" value =' + personObj.projects[i].id + ' onclick = "projectDetails.call(this)">' + personObj.projects[i].name + '</a>';
                   }

               }
           }

       });
   };
</script>

    <script>
       function projectDetails(){
           var personID  = "clotho.developer.katielewis1";
           var projName = this.innerText;
           var id = document.getElementById("rightColumn");
           var secondID = document.getElementById("createProject");
           id.style.display = 'block';
           secondID.style.display = 'none';
           Clotho.get(personID).then(function(Obj){
               alert(Obj.projects[0].name);
               alert(projName);
               var num = 0;
               for (var i = 0; i< Obj.projects.length;i++)
               {
                   if (Obj.projects[i].name.toLowerCase() == projName.toLowerCase()){
                       num = i;
                   }
               }
               alert(num);
//               alert(Obj.projects[num].name);
               document.getElementById("projTitle").innerHTML = Obj.projects[num].name;
               document.getElementById("currentLab").innerHTML = Obj.projects[num].Lab;
               document.getElementById("currentLead").innerHTML = Obj.projects[num].projectLead;
               document.getElementById("currentPI").innerHTML = Obj.projects[num].PI;
               document.getElementById("currentAdvisor").innerHTML = Obj.projects[num].advisor;
           });
       };
    </script>
<!--<script>-->
   <!--$scope.showProject =function(proj){-->
        <!--alert(proj.text.toLowerCase)-->
    <!--};-->
        <!--Clotho.query("name", proj.text.toLowerCase()).then(function (data){-->
            <!--var id = document.getElementById("rightColumn");-->
            <!--var secondID = document.getElementById("createProject");-->
            <!--var thirdID = document.getElementById("newProjectNotif");-->
            <!--if(id.style.display == 'block')-->
            <!--{-->
                <!--id.style.display = 'none';-->
            <!--}-->
            <!--if(secondID.style.display == 'block')-->
            <!--{-->
                <!--id.style.display = 'none';-->
            <!--}-->
            <!--if(thirdID.style.display == 'block')-->
            <!--{-->
                <!--id.style.display = 'none';-->
            <!--}-->

            <!--document.getElementById("currentLab").innerHTML = data.projLabs;-->
            <!--document.getElementById("currentPI").innerHTML = data.pi;-->
            <!--document.getElementById("currentLead").innerHTML = data.projLead;-->
            <!--document.getElementById("currentAdvisor").innerHTML = data.advisor;-->


           <!--id.style.display = 'block';-->
        <!--});-->
    <!--});-->
<!--</script>-->

<!--<script>-->

    <!--$(document).ready(function() {-->
    <script>
    var personID = "clotho.developer.katielewis1";
    $(document).ready(function() {
        $("#create").click(function () {
            var str = '{';
            //alert("hello world!");
            //alert(document.getElementById("projName").value);
            var firstObj = str.concat('"schema":', '"org.clothocad.model.Projects"', ',"name":', '"', document.getElementById("projName").value, '"', ',"projectLead":', '"', document.getElementById("projLead").value, '"');
            var obj = firstObj.concat(',"Lab":', '"', document.getElementById("projLabs").value, '"', ',"PI":', '"', document.getElementById("pi").value, '"', ',"Description":', '"', document.getElementById("description").value, '"', ',"advisor":', '"', document.getElementById("advisor").value, '"', '}');
            //            alert(obj);
            var jsonObj = JSON.parse(obj);
            Clotho.create(jsonObj).then(function () {
                Clotho.get(personID).then(function (personObj) {
//                    alert(JSON.stringify(personObj.projects));
                    personObj.projects[personObj.projects.length] = jsonObj;
                    Clotho.set(personObj).then(function () {
//                        alert(ID);
                        var tableRef = document.getElementById("projTable");
                        var newRow = tableRef.insertRow(tableRef.rows.length);
                        var newCell = newRow.insertCell(0);
                        newCell.innerHTML = '<a href="./Projects.html" style = "display:block" value =' + jsonObj.name + ' onclick = "projectDetails.call(this)">' + jsonObj.name + '</a>';
                    });
                });
                //var tableRef = document.getElementById("projTable");
                //var newRow = tableRef.insertRow(tableRef.rows.length);
                //var newCell = newRow.insertCell(0);
                //newCell.innerHTML = '<a href="./Projects.html" style = "display:block">' + document.getElementById("projName").value + '</a>';
                //var secondID = document.getElementById("createProject");
                //secondID.style.display = 'none';
                //var thirdID = document.getElementById("newProjectMotif");
                //thirdID.style.display = 'block';
            });
        });
    });
    </script>
        <!--$("#create").click(function() {-->
            <!--var str = '{';-->
//            <!--//alert("hello world!");-->
//            <!--//alert(document.getElementById("projName").value);-->
            <!--var id = '"' + "clotho.developer." + document.getElementById("projName").value.toLowerCase() + '"';-->
            <!--var firstObj = str.concat('"id":',id, ',"schema":', '"org.clothocad.model.Projects"', ',"name":', '"', document.getElementById("projName").value, '"',',"projectLead":', '"', document.getElementById("projLead").value, '"');-->
            <!--var obj = firstObj.concat(',"Lab":','"',document.getElementById("projLabs").value, '"', ',"PI":', '"', document.getElementById("pi").value, '"', ',"Description":', '"', document.getElementById("description").value,'"',',"advisor":','"',document.getElementById("advisor").value,'"', '}');-->
<!--//           alert(obj);&ndash;&gt;-->
            <!--var jsonObj = JSON.parse(obj);-->
            <!--Clotho.create(jsonObj).then(function(){-->
                <!--var tableRef = document.getElementById("projTable");-->
                <!--var newRow = tableRef.insertRow(tableRef.rows.length);-->
                <!--var newCell = newRow.insertCell(0);-->
//                <!--newCell.innerHTML = '<a href="./Projects.html" style = "display:block" ng-click="showProject(this)">' + document.getElementById("projName").value + '</a>';-->
                <!--var secondID = document.getElementById("createProject");-->
                <!--secondID.style.display = 'none';-->
                <!--var thirdID = document.getElementById("newProjectNotif");-->
                <!--thirdID.style.display = 'block';-->
            <!--});-->
        <!--});-->
    <!--});-->




<!-- our custom app files -->
<script src="scripts/LabOrdering-app.js"></script>
<script src="scripts/Ordering.js"></script>
<script src="scripts/Tracking.js"></script>
<script src="scripts/orderingCtrl.js"></script>


</body>
</html>
