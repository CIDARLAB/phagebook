<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>Profile</title>
    <link rel="shorcut icon" href="../styles/images/phagebookLogoMin_16x16.ico"/>
    <base href="/">
    <link rel="stylesheet" href="../styles/cssBootstrap/bootstrap.css"/>
    <link rel="stylesheet" href="../styles/clothoNavBar.css">
    <link rel="stylesheet" href="../styles/phagebookMainStyle.css"/>

    <script src="../scripts/angular.js"></script>
    <script src="../scripts/jquery.js"></script>
    <script src="../scripts/lodash.js"></script>

    <script src= "https://ajax.googleapis.com/ajax/libs/angularjs/1.2.26/angular.min.js"></script>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/3.1.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/q.js/1.0.0/q.js"></script>

<body>
<div ng-app="clothoRoot">
    <div class="container">
        <div clotho-command-bar></div>
    </div>
    <terminal-aside></terminal-aside>
    <h3>Welcome to your profile!</h3>
</div>
<!--------
SCRIPTS
--------->

<!--note - correct app based on the distribution, comments removed by build-
<script type = "text/javascript">
    $("#createStatus").click(function () {
        //alert(window.name);
        var personID = window.name;
        //var personID = "clotho.developer.klefort";
        timeStamp = new Date();
        //timeStamp = Date.now();
        //alert(timeStamp)
        //var StatusObj = str.concat('"schema":', '"org.clothocad.phagebook.status"');//,', "entryDate":', '",document.getElementById("statusText").value' );
        var StatusObj = "{ \"schema\": \"org.clothocad.phagebook.status\", \"time\" :\"" + timeStamp + "\" , \"text\": \"" + document.getElementById("newStatus").value + "\" , \"person\": \"" + personID + "\" }";
        //alert(StatusObj);
        var obj = JSON.parse(StatusObj);
        // alert(obj);
        // alert(StatusObj);
        Clotho.create(obj).then(function(result){
            Clotho.get(personID).then(function(personObj) {
                personObj.statuses.push(result);
                Clotho.set(personObj);
            })
        });
    });
</script>

<script>
    document.getElementById('imageupload').onchange = function (evt) {
        var tgt = evt.target || window.event.srcElement,
                files = tgt.files;

        // FileReader support
        if (FileReader && files && files.length) {
            var fr = new FileReader();
            fr.onload = function () {
                //alert("ping");
                document.getElementById('imagesource').src = fr.result;
            }
            fr.readAsDataURL(files[0]);
        }


        else {

        }
    }
</script>


<script type  = text/javascript>
    $(document).ready(function() {
        //("#loadProfile").click(function () {
        var x = document.createElement("INPUT");
        x.setAttribute("type", "file");
        //alert(window.name);
        //var personID = document.getElementById("login").value;
        var personID = window.name;
        // var personID =   "clotho.developer.klefort";
        var statusObj;
        var notNullArray = [];
        Clotho.get(personID).then(function (personObj) {
                    var N = 20;

                    //alert(personObj.lastname);
                    document.getElementById("profileName").innerHTML = personObj.firstname + " " + personObj.lastname;
                    document.getElementById("universityName").innerHTML = personObj.institution;
                    document.getElementById("positionName").innerHTML = personObj.position;
                    document.getElementById("profileName2").innerHTML = personObj.firstname + " " + personObj.lastname;;
                    //document.getElementById()
                    Clotho.get(personObj.statuses).then(function (statusObj) {
                        if (personObj.statuses.length == null) {
                        }
                        else {
                            for (var i = statusObj.length - 1; i >= 0; i--) {

                                if (statusObj[i] == null) {
                                    personObj.statuses[i] = [];
                                }
                                else {

                                    notNullArray.push(i);
                                    var paperCite = '';
                                    var newStatus = statusObj[i];
                                    $('#keyValueForm').append("<tr style='margin-top: 10px;'> <td>" + "<p>" + newStatus.text + "</p></td> <td><p>" + newStatus.time +"</p></td></tr>");
                                    /* $('printStatus').append("")*/
                                }

                            }

                        }
                    })
                    if (personObj.friends.length == null) {
                        alert("null");
                    }
                    else {
                        for (var i = personObj.friends.length - 1; i >= 0; i--) {
                            //alert(personObj);
                            if (personObj.friends[i] == null) {
                                personObj.friends[i] = [];
                            }
                            else {
                                notNullArray.push(i);
                                var paperCite = '';
                                var newFriend = personObj.friends[i];

                                $('#friendBox').append("<tr style='margin-top: 10px;'> <td>" + "<a href = ./Profile.html>" + newFriend + "</a></td> </tr>");
                            }


                        }


                    }
                }

        );


    });
</script>

-->

<script src="scripts/clotho/b18fc8c8.clotho-app-command.js"></script>

<script src="scripts/clotho/c0f113c2.clotho-core-module.js"></script>

<!--note - remove all scripts below this for api-only build-->

<script type='text/javascript' src="../scripts/clotho/b18fc8c8.clotho-app-command.js"></script>

<script type='text/javascript' vsrc="../scripts/clotho/c0f113c2.clotho-core-module.js"></script>

<script type='text/javascript' src="../scripts/clotho/c2a11f43.clotho-foundation-module.js"></script>


<script src='../scripts/clotho/68a2b2df.clotho-command-module.js'></script>

<!-- our custom app files -->
<script src="../scripts/clotho/clotho3API.js"></script>

</body>
</html>
