<!doctype html>
<html>
  <head>



    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Lab Ordering</title>
    <meta name="description" content="Clotho Lab Ordering">
    <meta name="viewport" content="width=1024, initial-scale=1">
    <script src="scripts/clotho3API.js"></script>
    <!-- not necessary until serving outside root directory / want html5 mode -->
    <base href="/">

    <link rel="stylesheet" href="styles/2e84f2a0.command.css"/>
    <link rel="stylesheet" href="styles/773cbfe6.main.css"/>
    <link rel ="stylesheet" href="styles/Phagebook_Styles.css"/>

    <script src="http://netdna.bootstrapcdn.com/bootstrap/3.1.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/q.js/1.0.0/q.js"></script>
    <script src="http://code.jquery.com/jquery-1.10.1.min.js"></script>

    <script src="bower_components/jquery/jquery.js"></script>

    <!-- note that angular is required for any clotho functionality -->
    <script src="bower_components/angular/angular.js"></script>
    <!-- note that lodash is required by several components -->
    <script src="bower_components/lodash/dist/lodash.js"></script>
      <script src="projectsCTRL.js"></script>
    <script src="projects-app.js"></script>
</head>

<body onload = "load()" ng-controller = "orderingCTRL">
<!--[if lt IE 9]>
<script src="bower_components/es5-shim/es5-shim.js"></script>
<script src="bower_components/json3/lib/json3.min.js"></script>
<![endif]-->


<div ng-app="clothoRoot">
  <div class="container">
    <div clotho-command-bar></div>
  </div>

  <terminal-aside></terminal-aside>
</div>


<div class = "contentBackground" ng-app = "ordering">
   <div class = "mainContent">
       <div class = "leftColumn">

         <div class = "personalInfo">

            <img src = "/images/people/Inna.jpg">

            <h4 >Inna Turshudzhyan <br> Boston University <br> CIDAR lab</h4>

           </div>

         <div class = "history">

          <h1>History</h1>

          <ul>
            <li><a href>Order 2783dh</a></li>
            <li><a href>Order 40ds7e</a></li>
            <li><a href>Order 2hd8w6</a></li>
            </ul>

           </div>

       </div>


   

       <div id = "rightColumn">

         <h1 style="margin-left: 20px">ORDERING</h1>

           <div class = "navigation">
          <ul class = "navigation">
            <li class = "navigationBar"><a href>About</a></li>
            <li class = "navigationBar"><a href=Ordering.html>Orders</a></li>
            <li class = "navigationBar"><a href=Vendors.html>Vendors</a></li>
            <li class = "navigationBar"><a href=Items.html>Items</a></li>
            <li class = "navigationBar"><a href>Stats</a></li>
          </ul>

           </div>
           <br>

        <div class = "line"></div>

        <br> <div id = "CreateNewOrder" style = "display: none">
        <ng-form class="form-horizontal" name = "orderingForm" ng-class="{'has-error' : projectForm.name.$dirty && orderingForm.name.$invalid}">

            <h1>Create New Order</h1>
            <label>Name*</label><br>
            <input id="name" type="text"><br><br>
            <label>Project*</label><br>
            <input id="project" type="text"><br><br>

            <button id = "NextButton" class="btn btn-primary" >Next</button><br>
        </ng-form>

        </div> 

            <div id = "New">
               <button type="button" id = "CreateNewOrderButton"> New Order</button>
               <br>
               <br>

               <label>Search for Order</label>
               <input id="itemSearch" type="text" onkeypress="itemAutocomplete()">

               <br><br>

               <table id = "tableOrders">
                   <tr>
                       <th>Name</th>
                       <th>Project</th>
                       <th>Vendor</th>
                       <th>Item</th>
                   </tr>
               </table>

               <br>
               <div class = "pages">

                   <ul class = "pages">

                       <li class = "pages"><a href> < previous </a></li>

                       <li class = "pages"><a href> 1</a></li>

                       <li class = "pages"><a href> 2</a></li>

                       <li class = "pages"><a href> 3</a></li>

                       <li class = "pages"><a href> 4</a></li>

                       <li class = "pages"><a href> 5</a></li>

                       <li class = "pages"><a href> 6</a></li>

                       <li class = "pages"><a href> next ></a></li>
                   </ul>
               </div>

           </div>

           <div id = "NextStep" style = "display: none">


               <ng-form class="form-horizontal" name = "orderingForm" ng-class="{'has-error' : projectForm.name.$dirty && orderingForm.name.$invalid}">

                   <h1>Create New Order</h1>
                   <label>Vendor*</label><br>
                   <input id="vendor" type="text"><br><br>
                   <label>Item*</label><br>
                   <input id="item" type="text"><br><br>

                   <button id = "Add" class="btn btn-primary" >+</button><br>
               </ng-form>

           </div>

           <div id = "OrderList" style = "display: none">

               <table id = "Orders">
                   <tr>
                       <th>Vendor</th>
                       <th>Item</th>
                   </tr>
               </table>

               <br>
               <button id = "Add1" class="btn btn-primary" >+</button><br>
               <button id = "Done" class="btn btn-primary" >Submit</button><br>

           </div>

       </div>

  </div>


</div>




<script src="scripts/b18fc8c8.clotho-app-command.js"></script>
<script src="scripts/c0f113c2.clotho-core-module.js"></script>
<!--note - remove all scripts below this for api-only build-->
<script src="scripts/c2a11f43.clotho-foundation-module.js"></script>
<script src="scripts/68a2b2df.clotho-command-module.js"></script>
<!-- our custom app files -->
<script src="scripts/ordering/ordering-app.js"></script>
<script src="scripts/ordering/basicAPI.js"></script>
<script src="scripts/ordering/trackingOrdering.js"></script>
<script src="scripts/ordering/orderingCtrl.js"></script>

<script>

    $(document).ready(function(){
        $("#CreateNewOrderButton").click(function(){
            var id = document.getElementById("New");
            var secondID = document.getElementById("CreateNewOrder");
            id.style.display='none';
            secondID.style.display = 'block';
        });
    });

    $(document).ready(function(){
        $("#NextButton").click(function(){
            if ((document.getElementById("name").value == "") ||
                    (document.getElementById("project").value == ""))
            {
                alert("Please fill out all required fields");
                document.getElementById("CreateNewOrder").style.display = 'block';
                document.getElementById("NextStep").style.display = 'none';
            }
            else
            {
                document.getElementById("CreateNewOrder").style.display='none';
                document.getElementById("NextStep").style.display = 'block';
            }
        });
    });

    $(document).ready(function(){
        $("#Add").click(function(){
            if ((document.getElementById("vendor").value == "") ||
                    (document.getElementById("item").value == ""))
            {
                alert("Please fill out all required fields");
                document.getElementById("NextStep").style.display = 'block';
                document.getElementById("OrderList").style.display = 'none';
            }
            else
            {
                document.getElementById("NextStep").style.display='none';
                document.getElementById("OrderList").style.display = 'block';

                var vendor = document.getElementById("vendor").value;
                var item = document.getElementById("item").value;

                var n_in = 1;
                n_in = Number(n_in) + 1;
                sessionStorage.n_keys = n_in;

                $('#Orders').append("<tr style='margin-top: 10px;'>" +
                "<td> <div class='form-group' style='margin-bottom: 10px;'>" + "<label class='sr-only' for='key" + n_in
                + "' >Key:</label>" + vendor + "</div> </td>" +
                "<td> <div class='form-group' style='margin-bottom: 10px;'>" + "<label class='sr-only' for='key" + n_in
                + "' >Key:</label>" + item + "</div> </td>" +"</tr>");

                var name = document.getElementById("name").value;
                var project = document.getElementById("project").value;
                var vendor = document.getElementById("vendor").value;
                var item = document.getElementById("item").value;

                var str = '{';
                var firstObj = str.concat(
                        '"' + "name" + '"' + ":" + '"' + document.getElementById("name").value
                        + '","project":' + '"' + document.getElementById("project").value
                        + '","vendor":' + '"' + document.getElementById("vendor").value
                        + '","item":' + '"' + document.getElementById("item").value
                        + '","schema":"org.clothocad.phagebook.order"}');

                var Obj = JSON.parse(firstObj);
                var n_in = 1;
                n_in = Number(n_in) + 1;
                sessionStorage.n_keys = n_in;
                Clotho.create(Obj);

                $('#tableOrders').append("<tr style='margin-top: 10px;'>" +
                "<td> <div class='form-group' style='margin-bottom: 10px;'>" + "<label class='sr-only' for='key" + n_in
                + "' >Key:</label>" + Obj.name + "</div> </td>" +
                "<td> <div class='form-group' style='margin-bottom: 10px;'>" + "<label class='sr-only' for='key" + n_in
                + "' >Key:</label>" + Obj.project + "</div> </td>" +
                "<td> <div class='form-group' style='margin-bottom: 10px;'>" + "<label class='sr-only' for='key" + n_in
                + "' >Key:</label>" + Obj.vendor + "</div> </td>" +
                "<td> <div class='form-group' style='margin-bottom: 10px;'>" + "<label class='sr-only' for='key" + n_in
                + "' >Key:</label>" + Obj.item + "</div> </td>" +"</tr>");


            }
        });
    });


    $(document).ready(function(){
        $("#Add1").click(function() {

            if (document.getElementById("OrderList").style.display = 'block')
            {
                document.getElementById("NextStep").style.display = 'block';
                document.getElementById("OrderList").style.display = 'none';

            }
        });
    });

    $(document).ready(function(){
        $("#Done").click(function() {
            alert("Are you sure you want to submit your order?");
        document.getElementById("New").style.display = 'block';
        document.getElementById("OrderList").style.display = 'none';
        });
    });


    function load(){
        var n_in = 1;
        n_in = Number(n_in) + 1;
        sessionStorage.n_keys = n_in;
        //var vendorName;
        Clotho.query({"schema":"org.clothocad.phagebook.order"}).then(function(orderList){

            for(var i=0;i<orderList.length;i++){


                $('#tableOrders').append("<tr style='margin-top: 10px;'> " +
                "<td> <div class='form-group' style='margin-bottom: 10px;'>" + "<label class='sr-only' for='key"+n_in
                + "' >Key:</label>" + orderList[i].name + "</div> </td>" +
                "<td> <div class='form-group' style='margin-bottom: 10px;'>" + "<label class='sr-only' for='key"+n_in
                + "' >Key:</label>" + orderList[i].project + "</div> </td>" +
                "<td> <div class='form-group' style='margin-bottom: 10px;'>" + "<label class='sr-only' for='key"+n_in
                + "' >Key:</label>" + orderList[i].vendor + "</div> </td>" +
                "<td> <div class='form-group' style='margin-bottom: 10px;'>" + "<label class='sr-only' for='key"+n_in
                + "' >Key:</label>" + orderList[i].item + "</div> </td>" + "</tr>");

            }
        });
    }


</script>

<!-- our custom app files -->
<script src="scripts/ordering/ordering-app.js"></script>
<script src="scripts/ordering/basicAPI.js"></script>
<script src="scripts/ordering/trackingOrdering.js"></script>
<script src="scripts/ordering/orderingCtrl.js"></script>



</body>
</html>
